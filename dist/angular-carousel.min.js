/**
 * Angular Carousel - Mobile friendly touch carousel for AngularJS
 * @version v0.1.5 - 2014-01-08
 * @link http://revolunet.github.com/angular-carousel
 * @author Julien Bouquillon <julien@revolunet.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
angular.module("angular-carousel",["ngTouch"]).config(["$provide",function(a){a.decorator("$rootScope",["$delegate",function(a){return a.safeApply=function(b){var c=a.$$phase;"$apply"===c||"$digest"===c?b&&"function"==typeof b&&b():a.$apply(b)},a}])}]),angular.module("angular-carousel").directive("rnCarouselIndicators",[function(){return{restrict:"A",replace:!0,scope:{items:"=",index:"="},template:'<div class="rn-carousel-indicator"><span ng-repeat="item in items" ng-click="$parent.index=$index" ng-class="{active: $index==$parent.index}">‚óè</span></div>'}}]),function(){"use strict";angular.module("angular-carousel").directive("rnCarousel",["$swipe","$window","$document","$parse","$compile","$rootScope",function(a,b,c,d,e,f){var g=b.navigator.userAgent.toLowerCase(),h=!1,i=g.match(/android/i);if(i){var j=g.match(/android ([\d\.]+)/)[1].split(".");if(j){var k=Number(j[0]);h=4>k}}var l=0,m=75,n=.05,o=3;return{restrict:"A",scope:!0,compile:function(g,i){var j,k,p=g.children()[0].attributes,q=!1,r=!1,s=!1;return g.addClass("rn-carousel-slides"),g.children().addClass("rn-carousel-slide"),["ng-repeat","data-ng-repeat","x-ng-repeat"].every(function(a){var b=p[a];if(angular.isDefined(b)){var c=b.value.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),d=c[3];if(j=c[1],k=c[2],j)return angular.isDefined(i.rnCarouselBuffered)&&(r=!0,b.value=j+" in "+k+"|carouselSlice:carouselBufferIndex:carouselBufferSize",d&&(b.value+=" track by "+d)),q=!0,!1}return!0}),function(g,i,j){function p(){for(var a=[],b=0;P>b;b++)a[b]=b;g.carouselIndicatorArray=a}function t(){return H=0,h&&(H=document.width),(0==H||"undefined"==typeof H)&&(H=$(window).outerWidth(!0)),Math.floor(H)}function u(){R.css("width","100%"),R.css("width",t()+"px")}function v(a){isNaN(a)&&(a=g.carouselIndex*H),O=a;var b=-Math.round(O);b+=g.carouselBufferIndex*H,Q[0].style[I]="translate3d("+b+"px, 0, 0)"}function w(){var a,b;L&&(a=Date.now()-N,b=L*Math.exp(-a/m),b>o||-o>b?(v(M-b),requestAnimationFrame(w)):z(M/H))}function x(a){return a>=P?P:0>=a?0:a}function y(){var a=0,b=(g.carouselBufferSize-1)/2;r&&(a=g.carouselIndex<=b?0:g.carouselIndex>P-g.carouselBufferSize?P-g.carouselBufferSize:g.carouselIndex-b),g.carouselBufferIndex=a}function z(a,b){return isNaN(a)&&(a=g.carouselIndex),b?(O=a*H,F(null,null,!0),void 0):(g.carouselIndex=x(a),y(),f.safeApply(),v(),void 0)}function A(){return n*H}function B(a){F({x:a.clientX,y:a.clientY},a)}function C(a){var b=a;return 0===g.carouselIndex?b=Math.max(-A(),b):g.carouselIndex===P-1&&(b=Math.min((P-1)*H+A(),b)),b}function D(a,b){return c.bind("mouseup",B),J=!0,K=a.x,L=0,N=Date.now(),b.preventDefault(),b.stopPropagation(),!1}function E(a,b){var c,d;return J&&(c=a.x,d=K-c,(d>2||-2>d)&&(K=c,requestAnimationFrame(function(){v(C(O+d))}))),b.preventDefault(),b.stopPropagation(),!1}function F(a,b,d){c.unbind("mouseup",B),J=!1,g.carouselIndex+1>=P&&f.$emit("carousel:loadMore"),M=O;var e=A(),h=g.carouselIndex*H,i=h-M,j=-Math[i>=0?"ceil":"floor"](i/H),k=Math.abs(i)>e;j+g.carouselIndex>=P&&(j=P-1-g.carouselIndex),j+g.carouselIndex<0&&(j=-g.carouselIndex);var l=k?j:0;return M=(l+g.carouselIndex)*H,L=M-O,N=Date.now(),d&&(L=O-h),requestAnimationFrame(w),b&&(b.preventDefault(),b.stopPropagation()),!1}function G(){u(),z()}l++;var H,I,J,K,L,M,N,O=0,P=0,Q=i.wrap("<div id='carousel-"+l+"' class='rn-carousel-container'></div>"),R=Q.parent();if(angular.isDefined(j.rnCarouselIndicator)){p(),g.$watch("carouselIndex",function(a){g.indicatorIndex=a}),g.$watch("indicatorIndex",function(a){z(a,!0)});var S=e("<div id='carousel-"+l+"-indicator' index='indicatorIndex' items='carouselIndicatorArray' rn-carousel-indicators class='rn-carousel-indicator'></div>")(g);R.append(S)}if(g.carouselBufferIndex=0,g.carouselBufferSize=5,g.carouselIndex=0,j.rnCarouselIndex){var T=d(j.rnCarouselIndex);angular.isFunction(T.assign)?(g.$watch("carouselIndex",function(a){T.assign(g.$parent,a)}),g.carouselIndex=T(g),g.$parent.$watch(T,function(a){void 0!==a&&z(a,!0)}),s=!0):isNaN(j.rnCarouselIndex)||(g.carouselIndex=parseInt(j.rnCarouselIndex,10))}q?g.$watchCollection(k,function(a){P=0,angular.isArray(a)?P=a.length:angular.isObject(a)&&(P=Object.keys(a).length),p(),H||u(),z(g.carouselIndex)}):(P=i.children().length,u()),a.bind(Q,{start:D,move:E,end:F,cancel:function(a){F({},a)}}),s||z(g.carouselIndex),I="transform",["webkit","Moz","O","ms"].every(function(a){var b=a+"Transform";return"undefined"!=typeof document.body.style[b]?(I=b,!1):!0});var U=angular.element(b);U.bind("orientationchange",G),U.bind("resize",G),g.$on("$destroy",function(){c.unbind("mouseup",B),U.unbind("orientationchange",G),U.unbind("resize",G)})}}}}])}(),function(){"use strict";angular.module("angular-carousel").filter("carouselSlice",function(){return function(a,b,c){return angular.isArray(a)?a.slice(b,b+c):angular.isObject(a)?a:void 0}})}();